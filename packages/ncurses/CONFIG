ncurses_VERSION ?= 6.4

TAR_EXTENSION = .tar.gz
MD5_SUM_5.9 = 8cb9c412e5f2d96bc6f459aa8c6282a1
MD5_SUM_6.1 = 98c889aaf8d23910d2b92d65be2e737a
MD5_SUM_6.4 = 5a62487b5d4ac6b132fe2bf9f8fad29b

ifeq ($(TERMS),)
ncurses_TERMS ?= xterm xterm-color xterm-256color screen vt100 vt102
else
ncurses_TERMS ?= $(TERMS)
endif

CFLAGS += -fPIC
# Deep in the ncurses build process a script called MKlib_gen.sh passes the
# output of `$(CROSS_COMPILE)gcc -E` through sed and awk scripts that get
# horribly confused by #line statements generated by some compilers.  This
# option suppresses these errors.
CPPFLAGS += -P

build:
	cd $(O)  &&  \
        $(srcdir)/configure CFLAGS='$(CFLAGS)' CPPFLAGS='$(CPPFLAGS)' \
            --host=$(COMPILER_PREFIX) --build=$(BUILD_TYPE) \
            --prefix=/usr --without-progs
	make -C $(O) install DESTDIR=$(I)
	$(install-pkg-config)

install:
	$(call EXPORT,I sysroot) $(packagedir)/install_terms $(ncurses_TERMS)

# vim: set filetype=make:
